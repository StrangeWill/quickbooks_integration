{
  "name": "quickbooks",
  "display": "Quickbooks",
  "description": "Updates Quickbooks with completed order details",
  "help": "http://guides.spreecommerce.com/integration/quickbooks_integration.html",
  "icon_url": "quickbooks.png",
  "services": [
    {
      "name": "order_export",
      "path": "/orders",
      "description": "Enabling this would export orders to Quickbooks as Sales Receipts",
      "requires": {
        "parameters": [
          {
            "name": "access_token",
            "description": "Quickbooks OAuth Access Token",
            "data_type": "string"
          },
          {
            "name": "access_secret",
            "description": "Quickbooks OAuth Access Secret",
            "data_type": "string"
          },
          {
            "name": "realm",
            "description": "Quickbooks OAuth Realm",
            "data_type": "string"
          },
          {
            "name": "deposit_to_account_name",
            "description": "Deposit Account for Sales Receipts in Quickbooks",
            "data_type": "string"
          },
          {
            "name": "payment_method_name",
            "description": "Mapping from Spree payment method names to Quickbooks payment method names",
            "data_type": "list"
          },
          {
            "name": "shipping_item",
            "description": "Quickbooks Item to track Shipping",
            "data_type": "string"
          },
          {
            "name": "tax_item",
            "description": "Quickbooks item to track Taxes",
            "data_type": "string"
          },
          {
            "name": "discount_item",
            "description": "Quickbooks Item to track Discounts",
            "data_type": "string"
          },
          {
            "name": "web_orders_user",
            "description": "Use \"Web Orders\" as customer name for transactions?",
            "data_type": "checkbox"
          }
        ]
      },
      "recommends": {
        "messages": ["order:new", "order:updated", "order:canceled"],
        "filters": [
          {
            "path": "payload.original.payment_state",
            "operator": "eq",
            "value": "paid"
          }
        ],
        "options": {
          "retries_allowed": true
        }
      }
    },
    {
      "name": "return_authorization_persist",
      "path": "/return_authorization_persist",
      "description": "Import order return authorizations to Quickbooks as a Credit Memo",
      "requires": {
        "parameters": [
          {
            "name": "access_token",
            "description": "Quickbooks oAUTH Access Token",
            "data_type": "string"
          },
          {
            "name": "access_secret",
            "description": "Quickbooks oAUTH Access Secret",
            "data_type": "string"
          },
          {
            "name": "realm",
            "description": "Quickbooks oAUTH Realm",
            "data_type": "string"
          },
          {
            "name": "deposit_to_account_name",
            "description": "Quickbooks account name to book the SalesReceipt in.",
            "data_type": "string"
          }
        ]
      },
      "recommends": {
        "messages": ["return_authorization:new", "return_authorization:updated"],
        "options": {
          "retries_allowed": true
        }
      }
    },
    {
      "name": "product_persist",
      "path": "/product_persist",
      "description": "Enabling this would import all your products from the spree store into QuickBooks",
      "requires": {
        "parameters": [
          {
            "name": "access_token",
            "description": "Quickbooks oAUTH Access Token",
            "data_type": "string"
          },
          {
            "name": "access_secret",
            "description": "Quickbooks oAUTH Access Secret",
            "data_type": "string"
          },
          {
            "name": "realm",
            "description": "Quickbooks oAUTH Realm",
            "data_type": "string"
          },
          {
            "name": "inventory_costing",
            "description": "Inventory/Non-Inventory items",
            "data_type": "boolean",
            "enables": [
              "inventory_account", "cogs_account"
            ]
          },
          {
            "name": "inventory_account",
            "description": "Inventory Account",
            "data_type": "string",
            "default": "Inventory Account"
          },
          {
            "name": "cogs_account",
            "description": "COGS Account",
            "data_type": "string",
            "default": "COGS Account"
          },
          {
            "name": "income_account",
            "description": "Income Account",
            "data_type": "string",
            "default": "Income Account"
          },
          {
            "name": "variants_as_sub_items",
            "description": "Selecting this would have every single variant of a product to be created as a separate item in QuickBooks and be a sub-item to the product of which the variant is",
            "data_type": "boolean"
          }
        ]
      },
      "recommends": {
        "messages": ["product:new","product:updated"],
        "options": {
          "retries_allowed": true
        }
      }
    }
  ]
}
