{
  "name": "quickbooks",
  "display": "Quickbooks",
  "description": "Updates Quickbooks with completed order details",
  "help": "http://guides.spreecommerce.com/integration/quickbooks_integration.html",
  "icon_url": "quickbooks.png",
  "services": [
    {
      "name": "order_persist",
      "path": "/order_persist",
      "description": "Import new order to a Quickbooks SalesReceipt or updates existing SalesReceipt.",
      "requires": {
        "parameters": [
          {
            "name": "access_token",
            "description": "Quickbooks oAUTH Access Token",
            "data_type": "string"
          },
          {
            "name": "access_secret",
            "description": "Quickbooks oAUTH Access Secret",
            "data_type": "string"
          },
          {
            "name": "realm",
            "description": "Quickbooks oAUTH Realm",
            "data_type": "string"
          },
          {
            "name": "ship_method_name",
            "description": "Mapping from Spree shipping methods to Quickbooks shipping method names",
            "data_type": "list"
          },
          {
            "name": "deposit_to_account_name",
            "description": "Quickbooks account name to book the SalesReceipt in.",
            "data_type": "string"
          },
          {
            "name": "payment_method_name",
            "description": "Mapping from Spree payment method names to Quickbooks payment method names",
            "data_type": "list"
          },
          {
            "name": "shipping_item",
            "description": "Quickbooks Item SKU to use for shipping line items",
            "data_type": "string"
          },
          {
            "name": "tax_item",
            "description": "Quickbooks Item SKU to use for tax line items",
            "data_type": "string"
          },
          {
            "name": "coupon_item",
            "description": "Quickbooks Item SKU to use for coupon line items",
            "data_type": "string"
          },
          {
            "name": "discount_item",
            "description": "Quickbooks Item SKU to use for discount line items",
            "data_type": "string"
          },
          {
            "name": "account_name",
            "description": "Quickbooks Income Account name for the items, defaults to 'Sales'",
            "data_type": "string"
          },
          {
            "name": "timezone",
            "description": "The timezone",
            "data_type": "string"
          }
        ]
      },
      "recommends": {
        "messages": ["order:new","order:updated"],
        "filters": [
          {
            "path": "payload.original.payment_state",
            "operator": "eq",
            "value": "paid"
          }
        ],
        "options": {
          "retries_allowed": true
        }
      }
    },
    {
      "name": "product_persist",
      "path": "/product_persist",
      "description": "Enabling this would import all your products from the spree store into QuickBooks",
      "requires": {
        "parameters": [
          {
            "name": "access_token",
            "description": "Quickbooks oAUTH Access Token",
            "data_type": "string"
          },
          {
            "name": "access_secret",
            "description": "Quickbooks oAUTH Access Secret",
            "data_type": "string"
          },
          {
            "name": "realm",
            "description": "Quickbooks oAUTH Realm",
            "data_type": "string"
          },
          {
            "name": "inventory_costing",
            "description": "Inventory/Non-Inventory items",
            "data_type": "boolean",
            "enables": [
              "inventory_account", "cogs_account"
            ]
          },
          {
            "name": "inventory_account",
            "description": "Inventory Account",
            "data_type": "string",
            "default": "Inventory Account"
          },
          {
            "name": "cogs_account",
            "description": "COGS Account",
            "data_type": "string",
            "default": "COGS Account"
          },
          {
            "name": "income_account",
            "description": "Income Account",
            "data_type": "string",
            "default": "Income Account"
          },
          {
            "name": "variants_as_sub_items",
            "description": "Selecting this would have every single variant of a product to be created as a separate item in QuickBooks and be a sub-item to the product of which the variant is",
            "data_type": "boolean"
          }
        ]
      },
      "recommends": {
        "messages": ["product:new","product:updated"],
        "options": {
          "retries_allowed": true
        }
      }
    }
  ]
}
